<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.jav.server.dao.base.SampleImageDao">
    <select id="querySampleImageById" parameterType="java.lang.Integer" resultType="com.jav.server.entity.base.SampleImage">
        SELECT * FROM sample_image WHERE id=#{id}
    </select>
    <select id="querySampleImageIdsByLinks" resultType="java.lang.Integer">
        SELECT id FROM sample_image WHERE link IN
        <foreach item="link" collection="links" open="(" separator="," close=")">
            #{link}
        </foreach>
    </select>
    <insert id="saveSampleImages" parameterType="java.util.List"> 
        INSERT INTO sample_image (link) VALUES 
        <foreach collection="list" item="image" separator=","> 
            (#{image.link}) 
        </foreach>
    </insert>

    <!-- querySampleImagesByIds --> 

    <select id="querySampleImagesByIds" resultType="com.jav.server.entity.base.SampleImage">
        SELECT * FROM sample_image WHERE id IN
        <foreach collection="sampleImageIds" item="sampleImageId" open="(" separator="," close=")">
            #{sampleImageId}
        </foreach>
    </select>

    <!-- updateSampleImage --> 

    <update id="updateSampleImage">
        UPDATE sample_image
        SET link=#{link}
        WHERE id = #{id}
    </update>
    <!-- 批量更新操作 -->
    <update id="updateSampleImages" parameterType="java.util.List">
        <foreach collection="sampleImages" item="sampleImage" separator=";">
            UPDATE sample_image
            SET link=#{sampleImage.link}
            WHERE id=#{sampleImage.id}
        </foreach>
    </update>

    <!-- querySampleImageByLinks --> 


    <select id="querySampleImageByLinks" resultType="com.jav.server.entity.base.SampleImage">
        SELECT * FROM sample_image WHERE id IN
        <foreach collection="links" item="link" open="(" separator="," close=")">
            #{link}
        </foreach>
    </select>
</mapper>